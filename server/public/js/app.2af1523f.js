(function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],p=0,m=[];p<i.length;p++)o=i[p],n[o]&&m.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",[a("NavBar"),a("v-content",{staticClass:"mx-4 mb-4"},[a("v-container",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("router-view")],1)],1)],1)],1)],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-toolbar",{attrs:{app:"",flat:""}},[a("v-spacer"),e.loggedIn?e._e():a("LoginPopup"),e.loggedIn?e._e():a("RegisterPopup"),e.loggedIn?a("v-btn",{attrs:{flat:"",color:"grey"},on:{click:e.logout}},[a("span",[e._v("Sign Out")]),a("v-icon",{attrs:{right:""}},[e._v("exit_to_app")])],1):e._e()],1)},i=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"success",attrs:{slot:"activator",flat:""},slot:"activator"},[e._v("Login")]),a("v-card",[a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-3"},[a("v-text-field",{attrs:{label:"E-mail","prepend-icon":"email",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{type:"password",label:"Password","prepend-icon":"vpn_key",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-spacer"),a("span",[e._v(e._s(e.errMessage))]),a("v-spacer"),a("v-btn",{staticClass:"success mx-0 mt-3",attrs:{flat:"",loading:e.loading},on:{click:e.submit}},[e._v("Log in")])],1)],1)],1)],1)},u=[],l={data:function(){return{email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/.+@.+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"}],errMessage:"",loading:!1,dialog:!1}},watch:{dialog:function(e){e||(this.$refs.form.reset(),this.errMessage="")}},methods:{submit:function(){var e=this;if(this.$refs.form.validate()){this.loading=!0;var t=this.email,a=this.password;this.$store.dispatch("auth/login",{email:t,password:a}).then(function(){e.dialog=!1,e.loading=!1}).catch(function(t){e.errMessage=t.message,e.loading=!1})}}}},p=l,m=a("2877"),d=a("6544"),f=a.n(d),v=a("8336"),g=a("b0af"),h=a("99d9"),w=a("169a"),b=a("4bd4"),y=a("9910"),x=a("2677"),_=Object(m["a"])(p,c,u,!1,null,null,null),k=_.exports;f()(_,{VBtn:v["a"],VCard:g["a"],VCardText:h["a"],VDialog:w["a"],VForm:b["a"],VSpacer:y["a"],VTextField:x["a"]});var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{"max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-btn",{staticClass:"success",attrs:{slot:"activator",flat:""},slot:"activator"},[e._v("Register")]),a("v-card",[a("v-card-text",[a("v-form",{ref:"form",staticClass:"px-3"},[a("v-text-field",{attrs:{label:"First name",rules:e.nameRules},model:{value:e.firstName,callback:function(t){e.firstName=t},expression:"firstName"}}),a("v-text-field",{attrs:{label:"Last name",rules:e.nameRules},model:{value:e.lastName,callback:function(t){e.lastName=t},expression:"lastName"}}),a("v-text-field",{attrs:{label:"E-mail",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("v-text-field",{attrs:{type:"password",label:"Password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("v-spacer"),a("span",[e._v(e._s(e.errMessage))]),a("v-spacer"),a("v-btn",{staticClass:"success mx-0 mt-3",attrs:{flat:"",loading:e.loading},on:{click:e.submit}},[e._v("Register")])],1)],1)],1)],1)},C=[],E={data:function(){return{firstName:"",lastName:"",nameRules:[function(e){return!!e||"This field is required"}],email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/[^@]+@[^\.]+\..+/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required."},function(e){return e&&e.length>=6||"Min 6 characters"}],errMessage:"",loading:!1,dialog:!1}},watch:{dialog:function(e){e||(this.$refs.form.reset(),this.loading=!1,this.errMessage="")}},methods:{submit:function(){var e=this;if(this.$refs.form.validate()){this.loading=!0;var t=this.firstName,a=this.lastName,r=this.email,n=this.password;this.$store.dispatch("auth/register",{firstName:t,lastName:a,email:r,password:n}).then(function(){e.dialog=!1,e.loading=!1}).catch(function(t){e.errMessage=t.message,e.loading=!1})}}}},R=E,I=Object(m["a"])(R,O,C,!1,null,null,null),j=I.exports;f()(I,{VBtn:v["a"],VCard:g["a"],VCardText:h["a"],VDialog:w["a"],VForm:b["a"],VSpacer:y["a"],VTextField:x["a"]});var N={components:{LoginPopup:k,RegisterPopup:j},methods:{logout:function(){this.$store.dispatch("auth/logout")}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn}}},V=N,S=a("132d"),$=a("71d9"),M=Object(m["a"])(V,o,i,!1,null,null,null),B=M.exports;f()(M,{VBtn:v["a"],VIcon:S["a"],VSpacer:y["a"],VToolbar:$["a"]});var T={name:"App",components:{NavBar:B}},P=T,q=a("7496"),D=a("a523"),L=a("549c"),A=a("0e8f"),F=a("a722"),J=Object(m["a"])(P,n,s,!1,null,null,null),Y=J.exports;f()(J,{VApp:q["a"],VContainer:D["a"],VContent:L["a"],VFlex:A["a"],VLayout:F["a"]});a("96cf");var G=a("3b8d"),z=a("4af9"),U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[a("router-link",{attrs:{to:{name:"company-details",params:{id:"new"}}}},[a("v-btn",{staticClass:"success"},[a("v-icon",[e._v("add")])],1)],1),e._v("\n    Company list\n  ")],1),a("br"),e._l(e.companies,function(t){return a("v-card",{key:t._id,attrs:{flat:"",to:{name:"company-details",params:{id:t._id}}}},[a("v-layout",{class:"pa-3",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("div",{staticClass:"caption grey--text"},[e._v("Company name")]),a("div",[e._v(e._s(t.name))])]),a("v-flex",{attrs:{xs6:"",sm4:"",md2:""}},[a("div",{staticClass:"caption grey--text"},[e._v("Address")]),a("div",[e._v(e._s(t.country)+" "+e._s(t.city)+" "+e._s(t.address))])])],1),a("v-divider")],1)})],2)},W=[],H={created:function(){this.$store.dispatch("company/getCompanies")},computed:{companies:function(){return this.$store.state.company.companies}}},K=H,Q=a("ce7e"),X=Object(m["a"])(K,U,W,!1,null,null,null),Z=X.exports;f()(X,{VBtn:v["a"],VCard:g["a"],VDivider:Q["a"],VFlex:A["a"],VIcon:S["a"],VLayout:F["a"]});var ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[a("router-link",{attrs:{to:{name:"company-list"}}},[a("v-btn",{staticClass:"info"},[a("v-icon",[e._v("arrow_back")])],1)],1),e._v("\n    "+e._s(e.company.name?e.company.name:"Add company")+"\n  ")],1),a("br"),a("v-tabs",{attrs:{grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("v-tabs-slider"),a("v-tab",[e._v("Details")]),a("v-tab",[e._v("Beneficial owners")])],1),a("v-card",[a("br"),0===e.tab?a("CompanyForm",{attrs:{company:e.company}}):e._e(),1===e.tab?a("CompanyInvite",{attrs:{companyId:e.company._id}}):e._e()],1),1===e.tab?a("BeneficialOwnerList"):e._e()],1)},te=[],ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",staticClass:"px-3"},[a("v-text-field",{attrs:{label:"Name",rules:e.normalRules},model:{value:e.company.name,callback:function(t){e.$set(e.company,"name",t)},expression:"company.name"}}),a("v-text-field",{attrs:{label:"Address",rules:e.normalRules},model:{value:e.company.address,callback:function(t){e.$set(e.company,"address",t)},expression:"company.address"}}),a("v-text-field",{attrs:{label:"City",rules:e.normalRules},model:{value:e.company.city,callback:function(t){e.$set(e.company,"city",t)},expression:"company.city"}}),a("v-text-field",{attrs:{label:"Country",rules:e.normalRules},model:{value:e.company.country,callback:function(t){e.$set(e.company,"country",t)},expression:"company.country"}}),a("v-text-field",{attrs:{label:"E-mail",rules:e.emailRules},model:{value:e.company.email,callback:function(t){e.$set(e.company,"email",t)},expression:"company.email"}}),a("v-text-field",{attrs:{label:"Phone"},model:{value:e.company.phone,callback:function(t){e.$set(e.company,"phone",t)},expression:"company.phone"}}),a("v-spacer"),a("div",{staticClass:"button-group"},[a("p",[e._v(e._s(e.errMessage))]),e.loggedIn?e._e():a("p",[e._v("You need to be logged in to edit the company")]),a("v-btn",{staticClass:"success mx-3 mt-3",attrs:{flat:"",loading:e.loading,disabled:!e.loggedIn},on:{click:e.saveCompany}},[e._v(e._s("new"===e.company._id?"Add":"Update"))]),a("v-btn",{staticClass:"error mx-3 mt-3",attrs:{flat:"",loading:e.loading,disabled:e.deleteDisabled||!e.loggedIn},on:{click:e.deleteCompany}},[e._v("Delete")])],1)],1)},re=[],ne={props:{company:{type:Object,required:!0}},data:function(){return{normalRules:[function(e){return!!e||"This field is required"}],emailRules:[function(e){return e=e||"",/[^@]+@[^\.]+\..+|(^$)/.test(e)||"E-mail must be valid"}],loggedIn:this.$store.state.auth.status.loggedIn,deleteDisabled:"new"===this.company._id,loading:!1,errMessage:""}},methods:{saveCompany:function(){var e=this;this.$refs.form.validate()&&(this.loading=!0,this.$store.dispatch("company/saveCompany",this.company).then(function(){e.loading=!1,e.errMessage="",nt.push("/")}).catch(function(t){e.errMessage=t.message,e.loading=!1}))},deleteCompany:function(){var e=this;this.loading=!0,this.$store.dispatch("company/deleteCompany",this.company._id).then(function(){e.loading=!1,e.errMessage="",nt.push("/")}).catch(function(t){e.errMessage=t.message,e.loading=!1})}}},se=ne,oe=(a("eb65"),Object(m["a"])(se,ae,re,!1,null,"6d8e0874",null)),ie=oe.exports;f()(oe,{VBtn:v["a"],VForm:b["a"],VSpacer:y["a"],VTextField:x["a"]});var ce=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-form",{ref:"form",staticClass:"px-3"},[a("v-text-field",{attrs:{label:"E-mail",rules:e.emailRules},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("div",{staticClass:"button-group"},[a("p",[e._v(e._s(e.errMessage))]),e.loggedIn?e._e():a("p",[e._v("You need to be logged in to add beneficial owners")]),"new"===e.companyId?a("p",[e._v("You need create the company before you can add beneficial owners")]):e._e(),a("v-btn",{staticClass:"success mx-3 mt-3",attrs:{flat:"",loading:e.loading,disabled:!e.loggedIn||"new"===e.companyId},on:{click:e.addBeneficialOwner}},[e._v("Invite")])],1)],1)],1)},ue=[],le={data:function(){return{email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/[^@]+@[^\.]+\..+/.test(e)||"E-mail must be valid"}],errMessage:"",loading:!1}},computed:{loggedIn:function(){return this.$store.state.auth.status.loggedIn},companyId:function(){return this.$store.state.company.company._id}},methods:{addBeneficialOwner:function(){var e=this;if("new"!==this.companyId&&this.$refs.form.validate()){this.loading=!0;var t=this.email,a=this.companyId;this.$store.dispatch("company/addBeneficialOwner",{email:t,id:a}).then(function(){e.$refs.form.reset(),e.errMessage="User invited!",e.loading=!1}).catch(function(t){e.errMessage=t.message,e.loading=!1})}}}},pe=le,me=(a("a198"),Object(m["a"])(pe,ce,ue,!1,null,"8addfce2",null)),de=me.exports;f()(me,{VBtn:v["a"],VForm:b["a"],VTextField:x["a"]});var fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.beneficialOwners.length?a("h1",[e._v("Beneficial Owner List")]):e._e(),e._l(e.beneficialOwners,function(t){return a("v-card",{key:t.firstName+t.lastName,attrs:{flat:""}},[a("v-layout",{class:"pa-3",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("div",[e._v(e._s(t.firstName)+" "+e._s(t.lastName))])])],1),a("v-divider")],1)})],2)},ve=[],ge={computed:{beneficialOwners:function(){return this.$store.state.company.beneficialOwners}}},he=ge,we=Object(m["a"])(he,fe,ve,!1,null,null,null),be=we.exports;f()(we,{VCard:g["a"],VDivider:Q["a"],VFlex:A["a"],VLayout:F["a"]});var ye={created:function(){this.$store.dispatch("company/getBeneficialOwners",this.company._id)},components:{CompanyForm:ie,CompanyInvite:de,BeneficialOwnerList:be},props:{company:{type:Object,required:!0}},data:function(){return{tab:null}}},xe=ye,_e=a("71a3"),ke=a("fe57"),Oe=a("9a96"),Ce=Object(m["a"])(xe,ee,te,!1,null,null,null),Ee=Ce.exports;f()(Ce,{VBtn:v["a"],VCard:g["a"],VIcon:S["a"],VTab:_e["a"],VTabs:ke["a"],VTabsSlider:Oe["a"]});var Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h1",[e._v("Ooops!")]),a("h3",[e._v("The "+e._s(e.resource)+" you're looking for is not here!")]),a("router-link",{attrs:{to:{name:"company-list"}}},[e._v("Back to the home page")])],1)},Ie=[],je={props:{resource:{type:String}}},Ne=je,Ve=Object(m["a"])(Ne,Re,Ie,!1,null,null,null),Se=Ve.exports,$e=a("94ea"),Me=a("d225"),Be=a("b0b4"),Te=a("bc3a"),Pe=a.n(Te),qe="/api/login",De=function(){function e(){Object(Me["a"])(this,e)}return Object(Be["a"])(e,null,[{key:"login",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.post(qe,{email:t,password:a});case 2:r=e.sent,n=r.data.data.token,localStorage.setItem("jwt",JSON.stringify(n));case 5:case"end":return e.stop()}},e)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"logout",value:function(){localStorage.removeItem("jwt")}}]),e}(),Le=De,Ae="/api/register",Fe=function(){function e(){Object(Me["a"])(this,e)}return Object(Be["a"])(e,null,[{key:"register",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a,r,n){var s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.post(Ae,{firstName:t,lastName:a,email:r,password:n});case 2:s=e.sent,o=s.data.data.token,localStorage.setItem("jwt",JSON.stringify(o));case 5:case"end":return e.stop()}},e)}));function t(t,a,r,n){return e.apply(this,arguments)}return t}()}]),e}(),Je=Fe,Ye={status:{loggedIn:!!JSON.parse(localStorage.getItem("jwt"))}},Ge={register:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,s,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,n=a.firstName,s=a.lastName,o=a.email,i=a.password,n){e.next=4;break}throw new Error("First Name required");case 4:if(s){e.next=6;break}throw new Error("Last Name required");case 6:if(o){e.next=8;break}throw new Error("Email required");case 8:if(i){e.next=10;break}throw new Error("Password ID required");case 10:return e.prev=10,e.next=13,Je.register(n,s,o,i);case 13:r("SET_LOGGED_IN",!0),e.next=19;break;case 16:throw e.prev=16,e.t0=e["catch"](10),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 19:case"end":return e.stop()}},e,null,[[10,16]])}));function t(t,a){return e.apply(this,arguments)}return t}(),login:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,n=a.email,s=a.password,n){e.next=4;break}throw new Error("Email required");case 4:if(s){e.next=6;break}throw new Error("Password ID required");case 6:return e.prev=6,e.next=9,Le.login(n,s);case 9:r("SET_LOGGED_IN",!0),e.next=15;break;case 12:throw e.prev=12,e.t0=e["catch"](6),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 15:case"end":return e.stop()}},e,null,[[6,12]])}));function t(t,a){return e.apply(this,arguments)}return t}(),logout:function(e){var t=e.commit;Le.logout(),t("SET_LOGGED_IN",!1)}},ze={SET_LOGGED_IN:function(e,t){e.status={loggedIn:t}}},Ue={namespaced:!0,state:Ye,actions:Ge,mutations:ze},We=a("6ee6"),He="/api/companies/",Ke=function(){function e(){Object(Me["a"])(this,e)}return Object(Be["a"])(e,null,[{key:"getCompanies",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.get(He);case 2:return t=e.sent,e.abrupt("return",t.data.data);case 4:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCompany",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pe.a.get(He+t);case 2:return a=e.sent,e.abrupt("return",a.data.data);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"createCompany",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")),e.next=3,Pe.a.post(He,t,{headers:{Authorization:a}});case 3:return r=e.sent,e.abrupt("return",r.data.data);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateCompany",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("jwt")),n=He+a,e.next=4,Pe.a.put(n,t,{headers:{Authorization:r}});case 4:return s=e.sent,e.abrupt("return",s.data.data);case 6:case"end":return e.stop()}},e)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"deleteCompany",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("jwt")),r=He+t,e.next=4,Pe.a.delete(r,{headers:{Authorization:a}});case 4:return n=e.sent,e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getBeneficialOwners",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=He+t+"/invite",e.next=3,Pe.a.get(a);case 3:return r=e.sent,e.abrupt("return",r.data.data);case 5:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"addBeneficialOwner",value:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("jwt")),n=He+a+"/invite",e.next=4,Pe.a.post(n,{email:t},{headers:{Authorization:r}});case 4:return s=e.sent,e.abrupt("return",s.data.data);case 6:case"end":return e.stop()}},e)}));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}(),Qe=Ke,Xe={companies:[],company:{},beneficialOwners:[]},Ze={getCompanies:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.prev=1,e.next=4,Qe.getCompanies();case 4:r=e.sent,a("SET_COMPANIES",r),e.next=11;break;case 8:throw e.prev=8,e.t0=e["catch"](1),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));function t(t){return e.apply(this,arguments)}return t}(),getCompany:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a){e.next=3;break}throw new Error("Company ID required");case 3:return e.prev=3,e.next=6,Qe.getCompany(a);case 6:return n=e.sent,r("SET_COMPANY",n),e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e["catch"](3),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 14:case"end":return e.stop()}},e,null,[[3,11]])}));function t(t,a){return e.apply(this,arguments)}return t}(),getNewCompany:function(e){var t=e.commit,a={_id:"new",name:"",address:"",city:"",country:"",email:"",phone:""};return t("SET_COMPANY",a),a},saveCompany:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,this.state.auth.status.loggedIn){e.next=3;break}throw new Error("You need to be logged in to create a company");case 3:if(a){e.next=5;break}throw new Error("Company required");case 5:if(e.prev=5,"new"!==a._id){e.next=11;break}return e.next=9,Qe.createCompany(a);case 9:e.next=13;break;case 11:return e.next=13,Qe.updateCompany(a);case 13:r("getCompanies"),e.next=19;break;case 16:throw e.prev=16,e.t0=e["catch"](5),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 19:case"end":return e.stop()}},e,this,[[5,16]])}));function t(t,a){return e.apply(this,arguments)}return t}(),deleteCompany:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(Object(We["a"])(t),this.state.auth.status.loggedIn){e.next=3;break}throw new Error("You need to be logged in to delete a company");case 3:if(a){e.next=5;break}throw new Error("Company ID required");case 5:if("new"!==a){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,Qe.deleteCompany(a);case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e["catch"](7),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 15:case"end":return e.stop()}},e,this,[[7,12]])}));function t(t,a){return e.apply(this,arguments)}return t}(),addBeneficialOwner:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.dispatch,n=a.email,s=a.id,this.state.auth.status.loggedIn){e.next=4;break}throw new Error("You need to be logged in to add beneficial owners");case 4:if(n){e.next=6;break}throw new Error("Email required");case 6:if(s){e.next=8;break}throw new Error("Company ID required");case 8:return e.prev=8,e.next=11,Qe.addBeneficialOwner(n,s);case 11:r("getBeneficialOwners",s),e.next=17;break;case 14:throw e.prev=14,e.t0=e["catch"](8),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 17:case"end":return e.stop()}},e,this,[[8,14]])}));function t(t,a){return e.apply(this,arguments)}return t}(),getBeneficialOwners:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.commit,a){e.next=3;break}throw new Error("Company ID required");case 3:return e.prev=3,e.next=6,Qe.getBeneficialOwners(a);case 6:n=e.sent,r("SET_BENEFICIAL_OWNERS",n),e.next=13;break;case 10:throw e.prev=10,e.t0=e["catch"](3),new Error(e.t0.response?e.t0.response.data.message:e.t0.message);case 13:case"end":return e.stop()}},e,null,[[3,10]])}));function t(t,a){return e.apply(this,arguments)}return t}()},et={SET_COMPANIES:function(e,t){e.companies=t},SET_COMPANY:function(e,t){e.company=t},SET_BENEFICIAL_OWNERS:function(e,t){e.beneficialOwners=t}},tt={namespaced:!0,state:Xe,actions:Ze,mutations:et};r["a"].use($e["a"]);var at=new $e["a"].Store({modules:{auth:Ue,company:tt}});r["a"].use(z["a"]);var rt=new z["a"]({mode:"history",routes:[{path:"/",name:"company-list",component:Z},{path:"/company/:id",name:"company-details",component:Ee,props:!0,beforeEnter:function(){var e=Object(G["a"])(regeneratorRuntime.mark(function e(t,a,r){var n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=t.params.id,"new"!==n){e.next=8;break}return e.next=5,at.dispatch("company/getNewCompany");case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,at.dispatch("company/getCompany",t.params.id);case 10:e.t0=e.sent;case 11:s=e.t0,t.params.company=s,r(),e.next=19;break;case 16:e.prev=16,e.t1=e["catch"](0),r({name:"404",params:{resource:"company"}});case 19:case"end":return e.stop()}},e,null,[[0,16]])}));function t(t,a,r){return e.apply(this,arguments)}return t}()},{path:"/404",name:"404",component:Se,props:!0},{path:"*",redirect:{name:"404",params:{resource:"page"}}}]}),nt=rt,st=a("bb71");a("da64");r["a"].use(st["a"],{iconfont:"md"}),r["a"].config.productionTip=!1,new r["a"]({router:nt,store:at,render:function(e){return e(Y)}}).$mount("#app")},"5e71":function(e,t,a){},"922e":function(e,t,a){},a198:function(e,t,a){"use strict";var r=a("5e71"),n=a.n(r);n.a},eb65:function(e,t,a){"use strict";var r=a("922e"),n=a.n(r);n.a}});
//# sourceMappingURL=app.2af1523f.js.map